<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title || 'Upload - SAOCLAO' %></title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/public/css/upload.css">

</head>
<body>
  <header class="header">
    <a class="logo-link" href="/">
      <img src="/public/img/saoclao.png" alt="SAOCLAO" class="logo-img">
    </a>
  </header>
  
  <% if (flash) { %>
    <div class="flash <%= flash.type %>"><%= flash.message %></div>
    <script>setTimeout(() => document.querySelector('.flash').remove(), 3000);</script>
  <% } %>
  
  <main class="container">
    <div class="page-header">
      <h1>T·∫£i l√™n b√†i h√°t c·ªßa b·∫°n</h1>
      <p>ƒê·ªÉ c√≥ ch·∫•t l∆∞·ª£ng t·ªët nh·∫•t, s·ª≠ d·ª•ng ƒë·ªãnh d·∫°ng WAV, FLAC, AIFF ho·∫∑c ALAC. K√≠ch th∆∞·ªõc t·ªëi ƒëa 4GB.</p>
    </div>
    
    <div class="upload-box" id="uploadBox">
      <div class="upload-icon">
        <svg viewBox="0 0 80 80">
          <path d="M40,10 C23,10 10,23 10,40 C10,57 23,70 40,70 C57,70 70,57 70,40 C70,23 57,10 40,10 Z M40,50 L30,40 L35,40 L35,30 L45,30 L45,40 L50,40 Z"/>
        </svg>
      </div>
      <div class="upload-text">
        <h3>K√©o th·∫£ file nh·∫°c v√†o ƒë√¢y ƒë·ªÉ b·∫Øt ƒë·∫ßu</h3>
        <p>ho·∫∑c</p>
      </div>
      <input type="file" id="audioFile" class="file-input" accept=".mp3,.wav,audio/*">
      <button class="choose-btn" onclick="document.getElementById('audioFile').click()">
        Ch·ªçn file
      </button>
    </div>
    
    <form method="post" action="/upload/new" enctype="multipart/form-data" id="detailsForm" class="details-form">
      <input type="file" name="audio" id="hiddenAudio" style="display:none;">
      
      <div class="audio-info" id="audioInfo" style="display:none;">
        <div class="icon">üéµ</div>
        <div class="details">
          <div class="filename" id="audioName"></div>
          <div class="filesize" id="audioSize"></div>
        </div>
      </div>

      <div class="form-group">
        <label>T√™n b√†i h√°t <span class="required">*</span></label>
        <input type="text" name="title" required placeholder="Nh·∫≠p t√™n b√†i h√°t">
      </div>
      
      <div class="form-group">
        <label>Ngh·ªá sƒ©</label>
        <input type="text" name="artist" placeholder="T√™n ngh·ªá sƒ©">
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label>Th·ªÉ lo·∫°i (genre)</label>
          <input type="text" name="genres" placeholder="VD: pop, indie, lo-fi">
          <small class="form-hint">Nh·∫≠p nhi·ªÅu gi√° tr·ªã, c√°ch nhau b·ªüi d·∫•u ph·∫©y</small>
        </div>
        <div class="form-group half">
          <label>Tags</label>
          <input type="text" name="tags" placeholder="VD: chill, study, workout">
          <small class="form-hint">Nh·∫≠p nhi·ªÅu gi√° tr·ªã, c√°ch nhau b·ªüi d·∫•u ph·∫©y</small>
        </div>
      </div>

      <div class="form-group">
        <label>Mood</label>
        <input type="text" name="mood" placeholder="VD: happy, sad, energetic">
      </div>

      <div class="form-group">
        <label>Lyrics (text)</label>
        <textarea name="lyricsText" rows="4" placeholder="Nh·∫≠p l·ªùi b√†i h√°t d·∫°ng text th∆∞·ªùng"></textarea>
      </div>

      <div class="form-group">
        <label>Lyrics (LRC)</label>
        <textarea name="lyricsLRC" rows="4" placeholder="[00:12.00] Line 1&#10;[00:25.50] Line 2"></textarea>
        <small class="form-hint">T√πy ch·ªçn, h·ªó tr·ª£ ƒë·ªìng b·ªô ch·ªØ karaoke</small>
      </div>
      
      <div class="form-group">
        <label>·∫¢nh b√¨a</label>
        <div class="image-upload">
          <div class="image-preview empty" id="imagePreview">üñº</div>
          <div class="image-info">
            <p>PNG ho·∫∑c JPG, khuy·∫øn ngh·ªã 3000x3000px.<br>T·ªëi ƒëa 5MB.</p>
            <input type="file" name="cover" id="coverFile" accept="image/*" style="display:none;">
            <button type="button" class="image-btn" onclick="document.getElementById('coverFile').click()">
              Ch·ªçn ·∫£nh
            </button>
          </div>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" onclick="window.location.href='/'">H·ªßy</button>
        <button type="submit" class="btn btn-primary">T·∫£i l√™n</button>
      </div>
    </form>
  </main>
  
  <script src="/public/js/upload.js"></script>
</body>
</html>
